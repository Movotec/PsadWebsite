CREATE TABLE [Measurements] (
  [RecID] int IDENTITY (1, 1) ,
  [PsadGuid] uniqueidentifier NOT NULL ,
  [PatientGuid] uniqueidentifier ,
  [OperatorGuid] uniqueidentifier ,
  [MeasureMode] ntext ,
  [Limb] nvarchar ,
  [Orientation] nvarchar ,
  [MeasureTime] float ,
  [Comport] int ,
  [FibulaLength] float ,
  [Comment] ntext ,
  [FirmWare1] int ,
  [FirmWare2] int ,
  [FirmWare3] int ,
  [MeasureDateTime] datetime NOT NULL ,
  [MeasureGuid] uniqueidentifier ,
  [MasterLength1] float ,
  [MasterLength2] float ,
  [StartAngle] float ,
  [MinAngle] float ,
  [MaxAngle] float ,
  [Rom] float ,
  [MaxAngularVelocity] float ,
  [MinAngularVelocity] float ,
  [MaxAcceleration] float ,
  [MinForce] float ,
  [MaxForce] float ,
  [MinXForce] float ,
  [MaxXForce] float ,
  [MinYForce] float ,
  [MaxYForce] float ,
  [Stiffness1] float ,
  [Stiffness2] float ,
  [Stiffness3] float ,
  [Stiffness4] float ,
  [Stiffness5] float ,
  [EMG1Activity] float ,
  [EMG2Activity] float ,
  [Batt0] bit ,
  [Batt1] bit ,
  [Batt2] bit ,
  [Led0] bit ,
  [Led1] bit ,
  [Led2] bit ,
  [Led3] bit ,
  [Led4] bit ,
  [Acc1XOffset] float ,
  [Acc1XGain] float ,
  [Acc1YOffset] float ,
  [Acc1YGain] float ,
  [Acc1ZOffset] float ,
  [Acc1ZGain] float ,
  [Acc2XOffset] float ,
  [Acc2XGain] float ,
  [Acc2YOffset] float ,
  [Acc2YGain] float ,
  [Acc2ZOffset] float ,
  [Acc2ZGain] float ,
  [GyroXOffset] float ,
  [GyroXGain] float ,
  [GyroYOffset] float ,
  [GyroYGain] float ,
  [GyroZOffset] float ,
  [GyroZGain] float ,
  [Emg1Offset] float ,
  [Emg1Gain] float ,
  [Emg2Offset] float ,
  [Emg2Gain] float ,
  [Straingauge1Offset] float ,
  [Straingauge1Gain] float ,
  [Straingauge2Offset] float ,
  [Straingauge2Gain] float ,
  [Straingauge3Offset] float ,
  [Straingauge3Gain] float ,
  [Straingauge4Offset] float ,
  [Straingauge4Gain] float ,
  [PsadWeight] float ,
  [PsadAcc12] float ,
  [PsadAcc1h] float ,
  [PsadAcc2h] float ,
  [Psadh] float ,
  [AccGRange] float ,
  [GyroDegreePrSec] float ,
  [SPS] float ,
  [Emg1Pad] int ,
  [Emg2Pad] int ,
  [BatteryLow] int ,
  [BatteryHigh] int ,
  [LastCalibrationDateAndTime] datetime , 
 PRIMARY KEY ([MeasureGuid])
) ON [PRIMARY]
GO

CREATE TABLE [Operators] (
  [RecID] uniqueidentifier ,
  [OrganisationID] uniqueidentifier ,
  [OperatorName] nvarchar(100) NOT NULL ,
  [Address] nvarchar(100) ,
  [City] nvarchar(100) ,
  [Email] nvarchar(100) ,
  [Phone] int ,
  [Gender] nvarchar ,
  [Type] nvarchar ,
  [Status] nvarchar , 
 PRIMARY KEY ([RecID])
) ON [PRIMARY]
GO

CREATE TABLE [Organisations] (
  [RecID] uniqueidentifier ,
  [OrganisationName] nvarchar(100) NOT NULL ,
  [Address] nvarchar(100) ,
  [City] nvarchar(100) ,
  [Phone] int ,
  [Contact] nvarchar(100) ,
  [Email] nvarchar(100) ,
  [Status] nvarchar , 
 PRIMARY KEY ([RecID])
) ON [PRIMARY]
GO

CREATE TABLE [MeasurementData] (
  [ID] int IDENTITY (1, 1) ,
  [MeasurementID] uniqueidentifier ,
  [Switches] int ,
  [Clock] float ,
  [Acc1X] float ,
  [Acc1Y] float ,
  [Acc1Z] float ,
  [Acc2X] float ,
  [Acc2Y] float ,
  [Acc2Z] float ,
  [GyroX] float ,
  [GyroY] float ,
  [GyroZ] float ,
  [Emg1] float ,
  [Emg2] float ,
  [Straingauge1] float ,
  [Straingauge2] float ,
  [Straingauge3] float ,
  [Straingauge4] float ,
  [Error] int , 
 PRIMARY KEY ([ID])
) ON [PRIMARY]
GO

CREATE TABLE [Patients] (
  [RecID] uniqueidentifier ,
  [PatientName] nvarchar(100) NOT NULL ,
  [Address] nvarchar(100) ,
  [BornYear] int ,
  [BornMonth] int ,
  [BornDay] int ,
  [Weight] float ,
  [Height] float ,
  [Phone] int ,
  [Email] nvarchar(100) ,
  [City] nvarchar(100) ,
  [ShoeSize] float ,
  [Comment] ntext ,
  [AnkleCircumSize] float ,
  [Length1] float ,
  [Length2] float ,
  [FibulaLength] float ,
  [Gender] nvarchar(6) ,
  [Status] nvarchar(50) ,
  [Diagnostic] nvarchar(50)  -- Should be foreign table, 
 PRIMARY KEY ([RecID])
) ON [PRIMARY]
GO

ALTER TABLE [Measurements] ADD FOREIGN KEY (PatientGuid) REFERENCES [Patients] ([RecID]);
				
ALTER TABLE [Measurements] ADD FOREIGN KEY (OperatorGuid) REFERENCES [Operators] ([RecID]);
				
ALTER TABLE [Operators] ADD FOREIGN KEY (OrganisationID) REFERENCES [Organisations] ([RecID]);
				
ALTER TABLE [MeasurementData] ADD FOREIGN KEY (MeasurementID) REFERENCES [Measurements] ([MeasureGuid]);